package rc800.decoder

import spinal.core._

import rc800.alu.Condition
import rc800.control.PipelineControl
import rc800.control.AluStageControl


case class LookupDecoder() extends Component {
	val io = new Bundle {
		val opcode = in Bits(8 bits)
		val strobe = in Bool()
		val output = out (DecoderOutput())

		def controlSignals = output.stageControl
	}

	private val signalMem = Mem(Array(
		B"00000000000000000000000000000000001010010000000010001001000000000000000",
		B"00000000000000000000000000000000001010010000000010001001000001101000001",
		B"00000000000000000000000000000000001010010000000010001001000001101000010",
		B"00000000000000000000000000000000001010010000000010001001000001101000011",
		B"00000000000000000000000000101000111010010000000010001001000000100000000",
		B"00000000000000000000000000101000111010010000000010001001000000100000001",
		B"00000000000000000000000000101000111010010000000010001001000000100000010",
		B"00000000000000000000000000101000111010010000000010001001000000100000011",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000000000001010010000000010001001001001101010001",
		B"00000000000000000000000000101000111010010000000010001001001000100010001",
		B"00000000000000000000000000101000111010010000000010001001000100100000000",
		B"00000000000000000000000000101000111010010000000010001001000100100000001",
		B"00000000000000000000000000101000111010010000000010001001000100100000010",
		B"00000000000000000000000000101000111010010000000010001001000100100000011",
		B"00000000000000000000000000111000101010011100000010001001000000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000101000010101000101010011100000010001001000000001100001",
		B"00000000000000000110100010101000101010011100000010001001000000001010001",
		B"00000000010100001000000000101000101010011100000010001001000000001100010",
		B"00000000011010001000000000101000101010011100000010001001000000001010010",
		B"01010000100000000000000000101000101010011100000010001001000000001100011",
		B"01101000100000000000000000101000101010011100000010001001000000001010011",
		B"00000000000000000000000000010000101010011000000010001000100000010000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000000000001010010000000010001001000000000000000",
		B"00000000000000000000000000000000001010010000000010001001000000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000000000001010010000000010001001000001110000100",
		B"00000000000000000000000000000000001010010000000010001001000001101000100",
		B"00000000000000000000000000000000001010010000000010001001000001110001000",
		B"00000000000000000000000000000000001010010000000010001001000001101001000",
		B"00000000000000000000000000000000001010010000000010001001000001110001100",
		B"00000000000000000000000000000000001010010000000010001001000001101001100",
		B"00000000000000000000000000010000111010010000000010001001000000100000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000001000010000000011010010000000010001001000000100000000",
		B"00000000000000000010100010000000011010010000000010001001000000100000000",
		B"00000000000100001000000000000000011010010000000010001001000000100000000",
		B"00000000001010001000000000000000011010010000000010001001000000100000000",
		B"00010000100000000000000000000000011010010000000010001001000000100000000",
		B"00101000100000000000000000000000011010010000000010001001000000100000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000000000001010010000000010001001000011101000001",
		B"00000000000000000000000000000000001010010000000010001001000011101000010",
		B"00000000000000000000000000000000001010010000000010001001000011101000011",
		B"00000000000000000000000000101000111010010000000010001001000010100000000",
		B"00000000000000000000000000101000111010010000000010001001000010100000001",
		B"00000000000000000000000000101000111010010000000010001001000010100000010",
		B"00000000000000000000000000101000111010010000000010001001000010100000011",
		B"00011000100000000000000000000000001010011100000100001001100000000000000",
		B"00011000100000000000000000000000001010011100000100001001100000000000100",
		B"00011000100000000000000000000000001010011100000100001001100000000001000",
		B"00011000100000000000000000000000001010011100000100001001100000000001100",
		B"00000000000000000000000000000000001010010000000100001001000000000000000",
		B"00000000000000000000000000000000001010010000000100001001000000000000100",
		B"00000000000000000000000000000000001010010000000100001001000000000001000",
		B"00000000000000000000000000000000001010010000000100001001000000000001100",
		B"00000000000000000000000000101000101010000000000010001001000000010010000",
		B"00000000000000000000000000101000101010000000000010001001000000001010000",
		B"00000000000000000000000000101000101010000000000010001001000000010010100",
		B"00000000000000000000000000101000101010000000000010001001000000001010100",
		B"00000000000000000000000000101000101010000000000010001001000000010011000",
		B"00000000000000000000000000101000101010000000000010001001000000001011000",
		B"00000000000000000000000000101000101010000000000010001001000000010011100",
		B"00000000000000000000000000101000101010000000000010001001000000001011100",
		B"00000000000000000000000000010000101010001000000010001001000000010010000",
		B"00000000000000000000000000010000101010001100000010001001000000000010000",
		B"00000000000000000000000000010000101010001000000010001001000000010010100",
		B"00000000000000000000000000010000101010001000000010001001000000001010100",
		B"00000000000000000000000000010000101010001000000010001001000000010011000",
		B"00000000000000000000000000010000101010001000000010001001000000001011000",
		B"00000000000000000000000000010000101010001000000010001001000000010011100",
		B"00000000000000000000000000010000101010001000000010001001000000001011100",
		B"00000000000000000000000000101000101010000100000010001001000000010010000",
		B"00000000000000000000000000101000101010000100000010001000000000001000000",
		B"00000000000000000000000000101000101010000100000010001001000000010010100",
		B"00000000000000000000000000101000101010000100000010001001000000001010100",
		B"00000000000000000000000000101000101010000100000010001001000000010011000",
		B"00000000000000000000000000101000101010000100000010001001000000001011000",
		B"00000000000000000000000000101000101010000100000010001001000000010011100",
		B"00000000000000000000000000101000101010000100000010001001000000001011100",
		B"00000000000000000000000000101000101010011100000010001001000000000100000",
		B"00000010000000000000000000000000001010010000000100001001000000000001100",
		B"00000000000000000000000000101000101010011100000010001001000000000100001",
		B"00000000000000000000000000101000101010011100000010001001000000000010001",
		B"00000000000000000000000000101000101010011100000010001001000000000100010",
		B"00000000000000000000000000101000101010011100000010001001000000000010010",
		B"00000000000000000000000000101000101010011100000010001001000000000100011",
		B"00000000000000000000000000101000101010011100000010001001000000000010011",
		B"00000000000000000000000000101000101010010100000010001001000000010010000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000101000101010010100000010001001000000010010100",
		B"00000000000000000000000000101000101010010100000010001001000000001010100",
		B"00000000000000000000000000101000101010010100000010001001000000010011000",
		B"00000000000000000000000000101000101010010100000010001001000000001011000",
		B"00000000000000000000000000101000101010010100000010001001000000010011100",
		B"00000000000000000000000000101000101010010100000010001001000000001011100",
		B"00000000000000000000000000101000101010010000000010001001000000010010000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000101000101010010000000010001001000000010010100",
		B"00000000000000000000000000101000101010010000000010001001000000001010100",
		B"00000000000000000000000000101000101010010000000010001001000000010011000",
		B"00000000000000000000000000101000101010010000000010001001000000001011000",
		B"00000000000000000000000000101000101010010000000010001001000000010011100",
		B"00000000000000000000000000101000101010010000000010001001000000001011100",
		B"00000000000000000000000000101000101010011000000010001001000000010010000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000101000101010011000000010001001000000010010100",
		B"00000000000000000000000000101000101010011000000010001001000000001010100",
		B"00000000000000000000000000101000101010011000000010001001000000010011000",
		B"00000000000000000000000000101000101010011000000010001001000000001011000",
		B"00000000000000000000000000101000101010011000000010001001000000010011100",
		B"00000000000000000000000000101000101010011000000010001001000000001011100",
		B"00000000000000000000000000010000101010011100000010001001000000000010000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000001000010000000001010011100000010001001000000000010000",
		B"00000000000000000010100010000000001010011100000010001001000000000010000",
		B"00000000000100001000000000000000001010011100000010001001000000000010000",
		B"00000000001010001000000000000000001010011100000010001001000000000010000",
		B"00010000100000000000000000000000001010011100000010001001000000000010000",
		B"00101000100000000000000000000000001010011100000010001001000000000010000",
		B"00000000000000000000000000010000111010010000010010001001010100100000000",
		B"00000000000000000000000000101000111010010000010010001001010100100000000",
		B"00000000000000000001000010000000011010010000010010001001010100100000000",
		B"00000000000000000010100010000000011010010000010010001001010100100000000",
		B"00000000000100001000000000000000011010010000010010001001010100100000000",
		B"00000000001010001000000000000000011010010000010010001001010100100000000",
		B"00010000100000000000000000000000011010010000010010001001010100100000000",
		B"00101000100000000000000000000000011010010000010010001001010100100000000",
		B"00000000000000000000000000010000101010000000000001000101010100100100000",
		B"00000000000000000000000000101000101010000000000001000101010100100010000",
		B"00000000000000000001000010000000001010000000000001000101010100100100001",
		B"00000000000000000010100010000000001010000000000001000101010100100010001",
		B"00000000000100001000000000000000001010000000000001000101010100100100010",
		B"00000000001010001000000000000000001010000000000001000101010100100010010",
		B"00010000100000000000000000000000001010000000000001000101010100100100011",
		B"00101000100000000000000000000000001010000000000001000101010100100010011",
		B"00000000000000000000000000000000000000010100000000100001010100100100000",
		B"00000000000000000000000000000000000001010100000000100001010100100100000",
		B"00000000000000000000000000000000000010010100000000100001010100100100000",
		B"00000000000000000000000000000000000011010100000000100001010100100100000",
		B"00000000000000000000000000000000000100010100000000100001010100100100000",
		B"00000000000000000000000000000000000101010100000000100001010100100100000",
		B"00000000000000000000000000000000000110010100000000100001010100100100000",
		B"00000000000000000000000000000000000111010100000000100001010100100100000",
		B"00000000000000000000000000000000001000010100000000100001010100100100000",
		B"00000000000000000000000000000000001001010100000000100001010100100100000",
		B"00000000000000000000000000000000001010010100000000100001010100100100000",
		B"00011001100000000000000000000000001010000100000110000101110100100000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000010000101010000000010010010001010100100100000",
		B"00000000000000000000000000101000101010000000010010010001010100100010000",
		B"00000000000000000001000010000000001010000000010010010001010100100100001",
		B"00000000000000000010100010000000001010000000010010010001010100100010001",
		B"00000000000100001000000000000000001010000000010010010001010100100100010",
		B"00000000001010001000000000000000001010000000010010010001010100100010010",
		B"00010000100000000000000000000000001010000000010010010001010100100100011",
		B"00101000100000000000000000000000001010000000010010010001010100100010011",
		B"00000000000000000000000000010000101010001000010010010001010100100100000",
		B"00000000000000000000000000010000101010001000010010010001010100100010000",
		B"00000000000000000000000000010000101010001000010010010001010100100100001",
		B"00000000000000000000000000010000101010001000010010010001010100100010001",
		B"00000000000000000000000000010000101010001000010010010001010100100100010",
		B"00000000000000000000000000010000101010001000010010010001010100100010010",
		B"00000000000000000000000000010000101010001000010010010001010100100100011",
		B"00000000000000000000000000010000101010001000010010010001010100100010011",
		B"00000000000000000000000000101000101010010100010010010001010100100010000",
		B"00000000000000000000000000101000101010010000010010010001010100100010000",
		B"00000000000000000000000000101000101010011000010010010001010100100010000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000011000101010100000010010010001010100100000000",
		B"00000000000000000000000000011000101010100100010010010001010100100000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000011000101010101000010010010001010100100000000",
		B"00000000000000000000000000011000101010000000010010010101010100100000000",
		B"00000000000000000001100010000000001010000000010010010101010100100000001",
		B"00000000000110001000000000000000001010000000010010010101010100100000010",
		B"00011000100000000000000000000000001010000000010010010101010100100000011",
		B"00000000000000000000000000000001001010010100000010000001000000000000000",
		B"00000000000000000000000100000000001010010100000010000001000000000000001",
		B"00000000000000010000000000000000001010010100000010000001000000000000010",
		B"00000001000000000000000000000000001010010100000010000001000000000000011",
		B"00000000000000000000000000000010001010010100000010000001000000000000000",
		B"00000000000000000000001000000000001010010100000010000001000000000000001",
		B"00000000000000100000000000000000001010010100000010000001000000000000010",
		B"00000010000000000000000000000000001010010100000010000001000000000000011",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000101100010011000101010011100000010001001000000000000001",
		B"00000000010110001000000000011000101010011100000010001001000000000000010",
		B"01011000100000000000000000011000101010011100000010001001000000000000011",
		B"00000100000001000000010000000100001010010000000010001001000000000000000",
		B"00000000000000000000000000010000101010001000000010001001000000000000100",
		B"00000000000000000000000000010000101010001000000010001001000000000001000",
		B"00000000000000000000000000010000101010001000000010001001000000000001100",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000001100010000000001010011100000010001001000000000000000",
		B"00000000000110001000000000000000001010011100000010001001000000000000000",
		B"00011000100000000000000000000000001010011100000010001001000000000000000",
		B"00000000000000000000000000010000101010001000000010000001000000000000000",
		B"00000000000000000000000000010000101010001000000010000001000000000000001",
		B"00000000000000000000000000010000101010001000000010000001000000000000010",
		B"00000000000000000000000000010000101010001000000010000001000000000000011",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000011000101010011100000010001001000000000000001",
		B"00000000000000000000000000011000101010011100000010001001000000000000010",
		B"00000000000000000000000000011000101010011100000010001001000000000000011",
		B"00000000000000000000000000000100001010010100000010000001000000000000000",
		B"00000000000000000000010000000000001010010100000010000001000000000000001",
		B"00000000000001000000000000000000001010010100000010000001000000000000010",
		B"00000100000000000000000000000000001010010100000010000001000000000000011",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000011000101010100000000010001001000000010000100",
		B"00000000000000000000000000011000101010100000000010001001000000001000100",
		B"00000000000000000000000000011000101010100000000010001001000000010001000",
		B"00000000000000000000000000011000101010100000000010001001000000001001000",
		B"00000000000000000000000000011000101010100000000010001001000000010001100",
		B"00000000000000000000000000011000101010100000000010001001000000001001100",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"10011001100000000000000000000000001010000001101000000101100000000000000",
		B"00000000000000000000000000011000101010100100000010001001000000010000100",
		B"00000000000000000000000000011000101010100100000010001001000000001000100",
		B"00000000000000000000000000011000101010100100000010001001000000010001000",
		B"00000000000000000000000000011000101010100100000010001001000000001001000",
		B"00000000000000000000000000011000101010100100000010001001000000010001100",
		B"00000000000000000000000000011000101010100100000010001001000000001001100",
		B"00000000000000000000000000011000101010000100000010001000000000000000000",
		B"00000000000000000000000000011000101010000100000010001001000000000000100",
		B"00000000000000000000000000011000101010000100000010001001000000000001000",
		B"00000000000000000000000000011000101010000100000010001001000000000001100",
		B"00000000000000000000000000011000101010000000000010001001000000000000000",
		B"00000000000000000000000000011000101010000000000010001001000000000000100",
		B"00000000000000000000000000011000101010000000000010001001000000000001000",
		B"00000000000000000000000000011000101010000000000010001001000000000001100",
		B"00000001000000010000000100000001001010010000000010001001000000000000000",
		B"00000010000000100000001000000010001010010000000010001001000000000000000",
		B"00000000000000000000000000011000101010101000000010001001000000010000100",
		B"00000000000000000000000000011000101010101000000010001001000000001000100",
		B"00000000000000000000000000011000101010101000000010001001000000010001000",
		B"00000000000000000000000000011000101010101000000010001001000000001001000",
		B"00000000000000000000000000011000101010101000000010001001000000010001100",
		B"00000000000000000000000000011000101010101000000010001001000000001001100"
	))

	io.output := signalMem.readSync(io.opcode.asUInt, io.strobe).as(DecoderOutput())
}

