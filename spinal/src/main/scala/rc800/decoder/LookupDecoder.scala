package rc800.decoder

import spinal.core._

import rc800.alu.Condition
import rc800.control.PipelineControl
import rc800.control.AluStageControl


case class LookupDecoder() extends Component {
	val io = new Bundle {
		val opcode = in Bits(8 bits)
		val strobe = in Bool()
		val output = out (DecoderOutput())

		def controlSignals = output.stageControl
	}

	private val signalMem = Mem(Array(
		B"0000000000000100001000001010010000000010001001000000010001000",
		B"0000000000000100001000001010010000000010001001000001100011001",
		B"0000000000000100001000001010010000000010001001000001100011010",
		B"0000000000000100001000001010010000000010001001000001100011011",
		B"0000000000000100000001111010010000000010001001000000110001000",
		B"0000000000000100000001111010010000000010001001000000110001001",
		B"0000000000000100000001111010010000000010001001000000110001010",
		B"0000000000000100000001111010010000000010001001000000110001011",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000001010010000000010001001001001100010011",
		B"0000000000000100000001111010010000000010001001001000110000011",
		B"0000000000000100000001111010010000000010001001000100110001000",
		B"0000000000000100000001111010010000000010001001000100110001001",
		B"0000000000000100000001111010010000000010001001000100110001010",
		B"0000000000000100000001111010010000000010001001000100110001011",
		B"0000000000000000010001101010011100000010001001000000000010000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000001010001101010011100000010001001000000000010010",
		B"0000000000000001110001101010011100000010001001000000000010011",
		B"0000000000000010010001101010011100000010001001000000000010100",
		B"0000000000000010110001101010011100000010001001000000000010101",
		B"0000000000000011010001101010011100000010001001000000000010110",
		B"0000000000000011110001101010011100000010001001000000000010111",
		B"0000000000000100000000101010011000000010001000100000000001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000001010010000000010001001000000010001000",
		B"0000000000000100001000001010010000000010001001000000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000001010010000000010001001000001100101000",
		B"0000000000000100001000001010010000000010001001000001100111000",
		B"0000000000000100001000001010010000000010001001000001101001000",
		B"0000000000000100001000001010010000000010001001000001101011000",
		B"0000000000000100001000001010010000000010001001000001101101000",
		B"0000000000000100001000001010010000000010001001000001101111000",
		B"0000000000000100000000111010010000000010001001000000110001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000010111010010000000010001001000000110001000",
		B"0000000000000100000011111010010000000010001001000000110001000",
		B"0000000000000100000100111010010000000010001001000000110001000",
		B"0000000000000100000101111010010000000010001001000000110001000",
		B"0000000000000100000110111010010000000010001001000000110001000",
		B"0000000000000100000111111010010000000010001001000000110001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000001010010000000010001001000011100011001",
		B"0000000000000100001000001010010000000010001001000011100011010",
		B"0000000000000100001000001010010000000010001001000011100011011",
		B"0000000000000100000001111010010000000010001001000010110001000",
		B"0000000000000100000001111010010000000010001001000010110001001",
		B"0000000000000100000001111010010000000010001001000010110001010",
		B"0000000000000100000001111010010000000010001001000010110001011",
		B"0000000000000100001011101010011100000100001001100000010001000",
		B"0000000000000100001011101010011100000100001001100000010011000",
		B"0000000000000100001011101010011100000100001001100000010101000",
		B"0000000000000100001011101010011100000100001001100000010111000",
		B"0000000000000100001000001010010000000100001001000000010001000",
		B"0000000000000100001000001010010000000100001001000000010011000",
		B"0000000000000100001000001010010000000100001001000000010101000",
		B"0000000000000100001000001010010000000100001001000000010111000",
		B"0000000000000100000001101010000000000010001001000000000000001",
		B"0000000000000100000001101010000000000010001001000000000010001",
		B"0000000000000100000001101010000000000010001001000000000100001",
		B"0000000000000100000001101010000000000010001001000000000110001",
		B"0000000000000100000001101010000000000010001001000000001000001",
		B"0000000000000100000001101010000000000010001001000000001010001",
		B"0000000000000100000001101010000000000010001001000000001100001",
		B"0000000000000100000001101010000000000010001001000000001110001",
		B"0000000000000100000000101010001000000010001001000000000000001",
		B"0000000000000100000000101010001100000010001001000000010000001",
		B"0000000000000100000000101010001000000010001001000000000100001",
		B"0000000000000100000000101010001000000010001001000000000110001",
		B"0000000000000100000000101010001000000010001001000000001000001",
		B"0000000000000100000000101010001000000010001001000000001010001",
		B"0000000000000100000000101010001000000010001001000000001100001",
		B"0000000000000100000000101010001000000010001001000000001110001",
		B"0000000000000100000001101010000100000010001001000000000000001",
		B"0000000000000100000001101010000100000010001000000000000011000",
		B"0000000000000100000001101010000100000010001001000000000100001",
		B"0000000000000100000001101010000100000010001001000000000110001",
		B"0000000000000100000001101010000100000010001001000000001000001",
		B"0000000000000100000001101010000100000010001001000000001010001",
		B"0000000000000100000001101010000100000010001001000000001100001",
		B"0000000000000100000001101010000100000010001001000000001110001",
		B"0000000000000100000001101010011100000010001001000000010000000",
		B"0010000000000100001000001010010000000100001001000000010111000",
		B"0000000000000100000001101010011100000010001001000000010000010",
		B"0000000000000100000001101010011100000010001001000000010000011",
		B"0000000000000100000001101010011100000010001001000000010000100",
		B"0000000000000100000001101010011100000010001001000000010000101",
		B"0000000000000100000001101010011100000010001001000000010000110",
		B"0000000000000100000001101010011100000010001001000000010000111",
		B"0000000000000100000001101010010100000010001001000000000000001",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000001101010010100000010001001000000000100001",
		B"0000000000000100000001101010010100000010001001000000000110001",
		B"0000000000000100000001101010010100000010001001000000001000001",
		B"0000000000000100000001101010010100000010001001000000001010001",
		B"0000000000000100000001101010010100000010001001000000001100001",
		B"0000000000000100000001101010010100000010001001000000001110001",
		B"0000000000000100000001101010010000000010001001000000000000001",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000001101010010000000010001001000000000100001",
		B"0000000000000100000001101010010000000010001001000000000110001",
		B"0000000000000100000001101010010000000010001001000000001000001",
		B"0000000000000100000001101010010000000010001001000000001010001",
		B"0000000000000100000001101010010000000010001001000000001100001",
		B"0000000000000100000001101010010000000010001001000000001110001",
		B"0000000000000100000001101010011000000010001001000000000000001",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000001101010011000000010001001000000000100001",
		B"0000000000000100000001101010011000000010001001000000000110001",
		B"0000000000000100000001101010011000000010001001000000001000001",
		B"0000000000000100000001101010011000000010001001000000001010001",
		B"0000000000000100000001101010011000000010001001000000001100001",
		B"0000000000000100000001101010011000000010001001000000001110001",
		B"0000000000000100000000101010011100000010001001000000010000001",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000010101010011100000010001001000000010000001",
		B"0000000000000100000011101010011100000010001001000000010000001",
		B"0000000000000100000100101010011100000010001001000000010000001",
		B"0000000000000100000101101010011100000010001001000000010000001",
		B"0000000000000100000110101010011100000010001001000000010000001",
		B"0000000000000100000111101010011100000010001001000000010000001",
		B"0000000000000100000000111010010000010010001001010100110001000",
		B"0000000000000100000001111010010000010010001001010100110001000",
		B"0000000000000100000010111010010000010010001001010100110001000",
		B"0000000000000100000011111010010000010010001001010100110001000",
		B"0000000000000100000100111010010000010010001001010100110001000",
		B"0000000000000100000101111010010000010010001001010100110001000",
		B"0000000000000100000110111010010000010010001001010100110001000",
		B"0000000000000100000111111010010000010010001001010100110001000",
		B"0000000000000100000000101010000000000001000101010100110000000",
		B"0000000000000100000001101010000000000001000101010100110000001",
		B"0000000000000100000010101010000000000001000101010100110000010",
		B"0000000000000100000011101010000000000001000101010100110000011",
		B"0000000000000100000100101010000000000001000101010100110000100",
		B"0000000000000100000101101010000000000001000101010100110000101",
		B"0000000000000100000110101010000000000001000101010100110000110",
		B"0000000000000100000111101010000000000001000101010100110000111",
		B"0000000000000100001000000000010100000000100001010100110000000",
		B"0000000000000100001000000001010100000000100001010100110000000",
		B"0000000000000100001000000010010100000000100001010100110000000",
		B"0000000000000100001000000011010100000000100001010100110000000",
		B"0000000000000100001000000100010100000000100001010100110000000",
		B"0000000000000100001000000101010100000000100001010100110000000",
		B"0000000000000100001000000110010100000000100001010100110000000",
		B"0000000000000100001000000111010100000000100001010100110000000",
		B"0000000000000100001000001000010100000000100001010100110000000",
		B"0000000000000100001000001001010100000000100001010100110000000",
		B"0000000000000100001000001010010100000000100001010100110000000",
		B"0001000000000100001011101010000100000110000101110100110001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100000000101010000000010010010001010100110000000",
		B"0000000000000100000001101010000000010010010001010100110000001",
		B"0000000000000100000010101010000000010010010001010100110000010",
		B"0000000000000100000011101010000000010010010001010100110000011",
		B"0000000000000100000100101010000000010010010001010100110000100",
		B"0000000000000100000101101010000000010010010001010100110000101",
		B"0000000000000100000110101010000000010010010001010100110000110",
		B"0000000000000100000111101010000000010010010001010100110000111",
		B"0000000000000100000000101010001000010010010001010100110000000",
		B"0000000000000100000000101010001000010010010001010100110000001",
		B"0000000000000100000000101010001000010010010001010100110000010",
		B"0000000000000100000000101010001000010010010001010100110000011",
		B"0000000000000100000000101010001000010010010001010100110000100",
		B"0000000000000100000000101010001000010010010001010100110000101",
		B"0000000000000100000000101010001000010010010001010100110000110",
		B"0000000000000100000000101010001000010010010001010100110000111",
		B"0000000000000100000001101010010100010010010001010100110000001",
		B"0000000000000100000001101010010000010010010001010100110000001",
		B"0000000000000100000001101010011000010010010001010100110000001",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000101010100000010010010001010100110001000",
		B"0000000000000100001000101010100100010010010001010100110001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000101010101000010010010001010100110001000",
		B"0000000000000100001000101010000000010010010101010100110001000",
		B"0000000000000100001001101010000000010010010101010100110001001",
		B"0000000000000100001010101010000000010010010101010100110001010",
		B"0000000000000100001011101010000000010010010101010100110001011",
		B"0000000000001100001000001010010100000010000001000000010001000",
		B"0000000001000100001000001010010100000010000001000000010001001",
		B"0000001000000100001000001010010100000010000001000000010001010",
		B"0001000000000100001000001010010100000010000001000000010001011",
		B"0000000000010100001000001010010100000010000001000000010001000",
		B"0000000010000100001000001010010100000010000001000000010001001",
		B"0000010000000100001000001010010100000010000001000000010001010",
		B"0010000000000100001000001010010100000010000001000000010001011",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100111000101010011100000010001001000000010001001",
		B"0000000000000101011000101010011100000010001001000000010001010",
		B"0000000000000101111000101010011100000010001001000000010001011",
		B"0100100100100100001000001010010000000010001001000000010001000",
		B"0000000000000100000000101010001000000010001001000000010011000",
		B"0000000000000100000000101010001000000010001001000000010101000",
		B"0000000000000100000000101010001000000010001001000000010111000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001001101010011100000010001001000000010001000",
		B"0000000000000100001010101010011100000010001001000000010001000",
		B"0000000000000100001011101010011100000010001001000000010001000",
		B"0000000000000100000000101010001000000010000001000000010001000",
		B"0000000000000100000000101010001000000010000001000000010001001",
		B"0000000000000100000000101010001000000010000001000000010001010",
		B"0000000000000100000000101010001000000010000001000000010001011",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000101010011100000010001001000000010001001",
		B"0000000000000100001000101010011100000010001001000000010001010",
		B"0000000000000100001000101010011100000010001001000000010001011",
		B"0000000000100100001000001010010100000010000001000000010001000",
		B"0000000100000100001000001010010100000010000001000000010001001",
		B"0000100000000100001000001010010100000010000001000000010001010",
		B"0100000000000100001000001010010100000010000001000000010001011",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000101010100000000010001001000000000101000",
		B"0000000000000100001000101010100000000010001001000000000111000",
		B"0000000000000100001000101010100000000010001001000000001001000",
		B"0000000000000100001000101010100000000010001001000000001011000",
		B"0000000000000100001000101010100000000010001001000000001101000",
		B"0000000000000100001000101010100000000010001001000000001111000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"1001000000000100001011101010000001101000000101100000010001000",
		B"0000000000000100001000101010100100000010001001000000000101000",
		B"0000000000000100001000101010100100000010001001000000000111000",
		B"0000000000000100001000101010100100000010001001000000001001000",
		B"0000000000000100001000101010100100000010001001000000001011000",
		B"0000000000000100001000101010100100000010001001000000001101000",
		B"0000000000000100001000101010100100000010001001000000001111000",
		B"0000000000000100001000101010000100000010001000000000010001000",
		B"0000000000000100001000101010000100000010001001000000010011000",
		B"0000000000000100001000101010000100000010001001000000010101000",
		B"0000000000000100001000101010000100000010001001000000010111000",
		B"0000000000000100001000101010000000000010001001000000010001000",
		B"0000000000000100001000101010000000000010001001000000010011000",
		B"0000000000000100001000101010000000000010001001000000010101000",
		B"0000000000000100001000101010000000000010001001000000010111000",
		B"0001001001001100001000001010010000000010001001000000010001000",
		B"0010010010010100001000001010010000000010001001000000010001000",
		B"0000000000000100001000101010101000000010001001000000000101000",
		B"0000000000000100001000101010101000000010001001000000000111000",
		B"0000000000000100001000101010101000000010001001000000001001000",
		B"0000000000000100001000101010101000000010001001000000001011000",
		B"0000000000000100001000101010101000000010001001000000001101000",
		B"0000000000000100001000101010101000000010001001000000001111000"
	))

	io.output := signalMem.readSync(io.opcode.asUInt, io.strobe).as(DecoderOutput())
}

